jQuery(function(t){"use strict";function e(t){var e;return!g||g.isHidden()?e=h.val():(e=g.getContent({format:t}),e=e.replace(/(?:<p[^>]*>)?(?:<br[^>]*>)?(?:<\/p>)?/,"")),e}function n(){return e("raw").length>0}function o(t){var e;return e=!g||g.isHidden()?h.val(t):g.setContent(t)}function i(){o("")}function a(){t("body").append(T);var e=y.createElement("div");e.id="lpb-dialog-obfuscator",w.appendChild(e),t("#lpb-content-override-dialog").find("button").on("click",function(){var e,n=t(this).data("action");e="stay"!==n,e&&("clear-page-builder"===n?(l(),p()):"clear-content"===n&&(i(),u()),r()),t("#lpb-content-override-dialog").remove(),t("#lpb-dialog-obfuscator").remove()})}function r(){t(w).addClass("lpb-enabled");var e='<button type="button" class="button button-small" id="lpb-back-to-wpeditor">'+lpb_vars.back_to_editor+"</button>";k.append(e),t("#wp-content-wrap, #post-status-info").hide(),k.show(),m("page-builder"),f()}function d(){t(w).removeClass("lpb-enabled"),k.hide(),m("default-editor"),t("#wp-content-wrap, #post-status-info").show(),t("#lpb-back-to-wpeditor").remove(),t(window).resize()}function l(){var t=C.find(".page-item");t.remove()}function p(){var e=t("#default-blocks").find('div[data-type="column"]').clone(!0);if(C.find(".empty").hide(),t("#delete-all-blocks").prop("disabled",!1),e){e.find(".item-xml").attr("name","item-xml[]"),e.addClass("item-1-1").removeClass("item-1-4"),e.find(".item-size").val("1-1"),C.append(e);var n=e.find("textarea.wp-editor-area");n.length>0&&(c(e,n),n.val(h.val()))}}function c(t,e){var n=e.attr("id"),o=(new Date).getTime().toString(16);e.attr("id",o),t.find("#qt_"+n+"_toolbar").remove();var i={id:o,buttons:"em,strong,link"};quicktags(i),QTags._buttonsInit()}function u(){s()}function s(){o(b())}function b(){var t="";return v(),E.map(function(e){var n=document.getElementById(e).value;t+=n+"\n\n"}),t}function v(){E=[],C.find(".wp-editor-area").each(function(){E.push(this.id)})}function f(){function t(){clearTimeout(e),e=setTimeout(function(){u(),"undefined"!=typeof YoastSEO&&YoastSEO.app.refresh()},250)}var e;t(),v(),E.map(function(e){document.getElementById(e).addEventListener("keyup",t)})}function m(e){var n={action:"lpb_set_editor_type",editor_type:e,post_id:lpb_vars.post_id,set_editor_type_nonce:lpb_vars.nonce};t.post(lpb_vars.ajaxurl,n)}function _(){var e={action:"lpb_get_editor_type",post_id:lpb_vars.post_id};t.post(lpb_vars.ajaxurl,e,function(e){"page-builder"===t.trim(e)&&r()})}var g,y=document,w=y.documentElement,h=t("#content"),k=t("#lollum-page-builder"),C=t("#grid-blocks"),E=[],x='<button type="button" id="lpb-builder-switch" class="switch-builder button">'+lpb_vars.page_builder_button+"</button>",T='<div id="lpb-content-override-dialog" class="lpb-dialog"><p>'+lpb_vars.override_dialog_description+'</p><p><button type="button" class="button lpb-content-override-action" data-action="stay">'+lpb_vars.override_dialog_stay+'</button> <button type="button" class="button button-primary lpb-content-override-action"  data-action="clear-page-builder">'+lpb_vars.override_dialog_clear+'</button> <button type="button" class="button button-primary lpb-content-override-action" data-action="clear-content">'+lpb_vars.override_dialog_keep+"</button></p></div>";k.hide(),t("#wp-content-wrap .wp-editor-tabs").append(x),t("#lpb-builder-switch").on("click",function(t){t.preventDefault(),n()?C.find(".page-item").length?a():(p(),r()):r()}),k.on("click","#lpb-back-to-wpeditor",function(){d()}),t(y).on("tinymce-editor-init",function(t,e){"content"===e.id&&(g=e)}),_()});